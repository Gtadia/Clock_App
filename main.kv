#:kivy 2.1.0
#:import Factory kivy.factory.Factory

<CheckBox>
    background_checkbox_normal: 'images/DOGE.jpeg'          # You can have a custom image as a checkbox
    # background_checkbox_down:

<MyPopup>
    auto_dismiss: False
    title: "Select Days"
    
    size_hint: (0.8, 0.3)
    pos_hint: {"x": 0.1, "top": 0.9}

    # Checkbox for the days when the alarm should ring
    # I could also implement a calendar but that's for later (too much work)
    BoxLayout:
        orientation: 'vertical'
        GridLayout:
            rows: 2
            # cols: 7
            Label: 
                text: "Sunday"
            Label:
                text: "Monday"
            Label:
                text: "Tuesday"
            Label:
                text: "Wednesday"
            Label:
                text: "Thursday"
            Label:
                text: "Friday"
            Label:
                text: "Saturday"
            CheckBox: 
                on_active: root.days_of_the_week_checkbox(self, self.active, "Sunday")
            CheckBox: 
                on_active: root.days_of_the_week_checkbox(self, self.active, "Monday")
            CheckBox: 
                on_active: root.days_of_the_week_checkbox(self, self.active, "Tuesday")
            CheckBox: 
                on_active: root.days_of_the_week_checkbox(self, self.active, "Wednesday")
            CheckBox: 
                on_active: root.days_of_the_week_checkbox(self, self.active, "Thursday")
            CheckBox: 
                on_active: root.days_of_the_week_checkbox(self, self.active, "Friday")
            CheckBox: 
                on_active: root.days_of_the_week_checkbox(self, self.active, "Saturday")
        Button:
            text: "Okay"
            on_release: root.dismiss()


WindowManager:
    AlarmWindow:
    TimerWindow:
    StopwatchWindow:
    WorldTimeWindow:

<AlarmWindow>
    name: "Alarm"

    BoxLayout:
        orientation: 'vertical'

        WindowSwitcher:
            size_hint: 0.85, 0.5
            pos_hint: {'center_x': 0.5}
            RoundedButton:
                text: "Alarm"
                background_normal: 'images/RButton_normal.png'   
                background_color: (1, 0, 0)
            RoundedButton:
                text: "Timer"
                on_release: 
                    app.root.current = "Timer"
                    root.manager.transition.direction = "left"
            RoundedButton:
                text: "Stopwatch"
                on_release: 
                    app.root.current = "Stopwatch"
                    root.manager.transition.direction = "left"
            RoundedButton:
                text: "World Time"
                on_release: 
                    app.root.current = "World Time"
                    root.manager.transition.direction = "left"

        Label:
            id: Alarm
            text: "Alarm"
            font_size: "50dp"
            color: (0, 0, 0)
        
        BoxLayout:
            FloatLayout:
                BoxLayout: 
                    orientation: 'horizontal'
                    pos_hint: {"center_y": 0.5}
                    TextInput:
                        id: time_input_hours
                        input_filter: "float"     # input_filter only allows certain data types to be inputted (in this case, only integers)
                        multiline: False
                        write_tab: False
                        on_cursor: root.text_inputted()
                        focus: False
                        text: ''
                        # opacity: 0
                    TextInput:
                        id: time_input_minutes
                        input_filter: "float"     # input_filter only allows certain data types to be inputted (in this case, only integers)
                        multiline: False
                        write_tab: False
                        on_cursor: root.text_inputted()
                        focus: False
                        text: ''
                        # opacity: 0
                    TextInput:
                        id: time_input_seconds
                        input_filter: "float"     # input_filter only allows certain data types to be inputted (in this case, only integers)
                        multiline: False
                        write_tab: False
                        on_cursor: root.text_inputted()
                        focus: False
                        text: ''
                        # opacity: 0                    
                BoxLayout:
                    orientation: 'horizontal'
                    pos_hint: {"center_y": 0.5}
                    Label:
                        id: time_6
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_5
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        text: ":"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_4
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_3
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        text: ":"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_2
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_1
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
        
        Button:
            text: "Does this work?"
            on_release: root.Set_Alarm()
        Button:
            text: "Popup"
            font_size: 32
            on_release: Factory.MyPopup().open()

                
<TimerWindow>:
    name: "Timer"

    BoxLayout:
        orientation: 'vertical'

        WindowSwitcher:
            size_hint: 0.85, 0.5
            pos_hint: {'center_x': 0.5}
            RoundedButton:
                text: "Alarm"
                on_release: 
                    app.root.current = "Alarm"
                    root.manager.transition.direction = "right"
            RoundedButton:
                text: "Timer"
                background_normal: 'images/RButton_normal.png'   
                background_color: (1, 0, 0)
            RoundedButton:
                text: "Stopwatch"
                on_release: 
                    app.root.current = "Stopwatch"
                    root.manager.transition.direction = "left"
            RoundedButton:
                text: "World Time"
                on_release: 
                    app.root.current = "World Time"
                    root.manager.transition.direction = "left"

        Label:
            id: Timer
            text: "Timer"
            font_size: "50dp"
            color: (0, 0, 0)
        
        BoxLayout:
            FloatLayout:
                BoxLayout: 
                    orientation: 'horizontal'
                    pos_hint: {"center_y": 0.5}
                    TextInput:
                        id: time_input_hours
                        input_filter: "float"     # input_filter only allows certain data types to be inputted (in this case, only integers)
                        multiline: False
                        write_tab: False
                        on_cursor: root.text_inputted()
                        focus: False
                        text: ''
                        # opacity: 0
                    TextInput:
                        id: time_input_minutes
                        input_filter: "float"     # input_filter only allows certain data types to be inputted (in this case, only integers)
                        multiline: False
                        write_tab: False
                        on_cursor: root.text_inputted()
                        focus: False
                        text: ''
                        # opacity: 0
                    TextInput:
                        id: time_input_seconds
                        input_filter: "float"     # input_filter only allows certain data types to be inputted (in this case, only integers)
                        multiline: False
                        write_tab: False
                        on_cursor: root.text_inputted()
                        focus: False
                        text: ''
                        # opacity: 0                    
                BoxLayout:
                    orientation: 'horizontal'
                    pos_hint: {"center_y": 0.5}
                    Label:
                        id: time_6
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_5
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        text: ":"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_4
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_3
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        text: ":"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_2
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_1
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
        
        Button:
            id: Timer_StartStopButton
            text: "START"
            on_release: root.Start_Timer()

        Button:
            text: "RESET"
            on_release: root.Reset_Timer()

    

<StopwatchWindow>:
    name: "Stopwatch"

    BoxLayout:
        orientation: 'vertical'

        WindowSwitcher:
            size_hint: 0.85, 0.5
            pos_hint: {'center_x': 0.5}
            RoundedButton:
                text: "Alarm"
                on_release: 
                    app.root.current = "Alarm"
                    root.manager.transition.direction = "right"
            RoundedButton:
                text: "Timer"
                on_release: 
                    app.root.current = "Timer"
                    root.manager.transition.direction = "right"
            RoundedButton:
                text: "Stopwatch"
                background_normal: 'images/RButton_normal.png'   
                background_color: (1, 0, 0)
            RoundedButton:
                text: "World Time"
                on_release: 
                    app.root.current = "World Time"
                    root.manager.transition.direction = "left"

        Label:
            id: Stopwatch
            text: "Stopwatch"
            font_size: "50dp"
            color: (0, 0, 0)
        
        BoxLayout:
            FloatLayout:
                BoxLayout: 
                    orientation: 'horizontal'
                    pos_hint: {"center_y": 0.5}
                   
                BoxLayout:
                    orientation: 'horizontal'
                    pos_hint: {"center_y": 0.5}
                    Label:
                        id: time_6
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_5
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        text: ":"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_4
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_3
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        text: ":"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_2
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)
                    Label:
                        id: time_1
                        text: "0"
                        font_size: 50
                        color: (0.1, 0.1, 0.1)

            Button:
                id: startStopButton
                text: "START"
                on_press: root.Start_Stopwatch(self.text)
        


<WorldTimeWindow>:
    name: "World Time"

    BoxLayout:
        orientation: 'vertical'

        WindowSwitcher:
            size_hint: 0.85, 0.5
            pos_hint: {'center_x': 0.5}
            RoundedButton:
                text: "Alarm"
                on_release: 
                    app.root.current = "Alarm"
                    root.manager.transition.direction = "right"
            RoundedButton:
                text: "Timer"
                on_release: 
                    app.root.current = "Timer"
                    root.manager.transition.direction = "right"
            RoundedButton:
                text: "Stopwatch"
                on_release: 
                    app.root.current = "Stopwatch"
                    root.manager.transition.direction = "right"
            RoundedButton:
                text: "World Time"
                background_normal: 'images/RButton_normal.png'   
                background_color: (1, 0, 0)

        RoundedButton:
            text: "Hello"

            on_press: 
                root.hello()
            on_release:
                pass


<RoundedButton@Button>
    background_normal: 'images/RButton_normal.png'          # You can have a custom image as a Button
    background_down: 'images/RButton_pressed.png'